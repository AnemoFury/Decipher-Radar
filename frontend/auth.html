<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | DECIPHER</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='100' height='100' rx='20' fill='black'/%3E%3Ccircle cx='30' cy='30' r='10' fill='%23f97316'/%3E%3Ccircle cx='55' cy='30' r='10' fill='%23f97316'/%3E%3Ccircle cx='80' cy='30' r='10' fill='%23f97316'/%3E%3Ccircle cx='30' cy='55' r='10' fill='%23f97316'/%3E%3Ccircle cx='55' cy='55' r='10' fill='%23f97316'/%3E%3Ccircle cx='80' cy='55' r='10' fill='%23f97316'/%3E%3Ccircle cx='30' cy='80' r='10' fill='%23f97316'/%3E%3Ccircle cx='55' cy='80' r='10' fill='%23f97316'/%3E%3Ccircle cx='80' cy='80' r='10' fill='%23f97316'/%3E%3C/svg%3E">

    <!-- Styles -->
    <style>
        #loading-screen {
            position: fixed;
            inset: 0;
            background: #ffffff;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader {
            width: 40px;
            height: 40px;
            border: 3px solid #3b82f6;
            border-bottom-color: transparent;
            border-radius: 50%;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        blue: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>


    <style>
        body {
            background-color: #f8fafc;
            color: #1e293b;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid #e2e8f0;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        .bg-grid-pattern {
            background-image: linear-gradient(to right, #eff6ff 1px, transparent 1px),
                linear-gradient(to bottom, #eff6ff 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
    </style>
</head>

<body
    class="h-screen w-full flex relative selection:bg-blue-100 selection:text-blue-900 bg-white text-slate-900 overflow-hidden">
    <!-- Loading Screen -->
    <div id="loading-screen" class="bg-white z-[1000] flex flex-col items-center justify-center">
        <div
            class="max-w-sm w-full p-8 border border-slate-200 rounded-2xl shadow-2xl bg-white relative overflow-hidden">
            <div class="flex flex-col items-center gap-6 relative z-10">
                <div class="loader-ring w-12 h-12 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin">
                </div>
                <div class="text-center">
                    <h2 class="text-sm font-black text-slate-900 uppercase tracking-widest mb-1">Security Analysis</h2>
                    <p class="text-[10px] text-slate-400 font-mono uppercase tracking-[0.2em]" id="loading-status">
                        Validating Identity</p>
                </div>

                <!-- Technical ML Logs -->
                <div
                    class="w-full bg-slate-950 rounded-lg p-4 font-mono text-[9px] text-emerald-500/80 h-32 overflow-hidden flex flex-col-reverse shadow-inner">
                    <div id="ml-logs">
                        <!-- Logs injected via JS -->
                    </div>
                </div>
            </div>

            <!-- Scanline effect -->
            <div
                class="absolute inset-x-0 h-1 bg-blue-500/20 top-0 animate-[scan_3s_linear_infinite] shadow-[0_0_15px_rgba(59,130,246,0.5)]">
            </div>
        </div>
    </div>
    <style>
        @keyframes scan {
            from {
                top: 0%
            }

            to {
                top: 100%
            }
        }

        .loader-ring {
            border-top-color: #2563eb;
        }
    </style>
    <script>
        const logs = [
            "Initializing secure bridge...",
            "Establishing VPN handshake...",
            "Analyzing hardware fingerprint v4...",
            "Scanning local memory space...",
            "Validating behavioral vectors...",
            "Contacting neural processing cluster [NORTH-B]...",
            "Running probabilistic fraud model...",
            "Checking global threat intelligence DB...",
            "Verifying sub-second latency packets...",
            "Analyzing biometric entropy...",
            "Decrypting RSA-4096 session key...",
            "Validation successful. Protocols active."
        ];
        const logContainer = document.getElementById('ml-logs');
        const statusText = document.getElementById('loading-status');
        let logIdx = 0;

        function addLog() {
            if (logIdx < logs.length) {
                const div = document.createElement('div');
                div.className = "mb-1 opacity-0 animate-in fade-in slide-in-from-bottom-1 duration-300";
                div.innerHTML = `<span class="text-slate-600">[${new Date().toLocaleTimeString('en-GB', { hour12: false })}]</span> > ${logs[logIdx]}`;
                logContainer.appendChild(div);
                statusText.innerText = logs[logIdx].replace('...', '');
                logIdx++;
                setTimeout(addLog, 600 + Math.random() * 800);
            } else {
                setTimeout(() => {
                    const loader = document.getElementById('loading-screen');
                    if (loader) loader.classList.add('hidden');
                }, 1200);
            }
        }

        window.addEventListener('load', () => {
            addLog();
        });

        // Backup safety
        setTimeout(() => {
            const loader = document.getElementById('loading-screen');
            if (loader && !loader.classList.contains('hidden')) loader.classList.add('hidden');
        }, 8000);
    </script>

    <!-- Back Button (Left Top Bold) -->
    <a href="landing.html"
        class="absolute top-6 left-6 z-50 flex items-center gap-2 text-slate-500 hover:text-slate-900 transition group p-2 rounded-lg hover:bg-white/50">
        <i data-lucide="arrow-left" class="w-5 h-5 group-hover:-translate-x-1 transition-transform stroke-[3px]"></i>
        <span class="font-bold text-sm">Back</span>
    </a>

    <!-- Left Side: Content & Form -->
    <div
        class="w-full md:w-1/2 h-full flex flex-col p-8 md:p-12 z-10 relative overflow-y-auto bg-slate-50 justify-center">

        <div class="flex-1 flex flex-col justify-center max-w-md w-full mx-auto relative z-10">

            <div class="mb-10 text-center md:text-left">
                <h1 class="text-3xl md:text-4xl font-black text-slate-900 mb-3 tracking-tight">
                    Login
                </h1>
            </div>

            <div class="w-full bg-white border border-slate-200 p-8 rounded-2xl shadow-xl shadow-slate-200/50">
                <form onsubmit="handleLogin(event)" class="space-y-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase tracking-widest">Email</label>
                        <input type="email"
                            class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition font-bold"
                            placeholder="name@company.com">
                    </div>

                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <label class="text-xs font-bold text-slate-500 uppercase tracking-widest">Password</label>
                        </div>
                        <input type="password"
                            class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition font-bold"
                            placeholder="••••••••">
                    </div>

                    <button id="submitBtn" type="submit"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3.5 rounded-lg transition-all shadow-lg shadow-blue-600/20 hover:shadow-blue-600/30 flex items-center justify-center gap-2 mt-4 uppercase tracking-widest text-sm">
                        <span>Log In</span>
                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                    </button>
                </form>


            </div>



            <div class="text-xs text-slate-400 text-center mt-8 font-mono tracking-widest">
                &copy; 2026 DECIPHER SECURITY INC.
            </div>
        </div>
    </div>

    <!-- Right Side: Visual (Blue/Light Theme) -->
    <div class="hidden md:block w-1/2 bg-slate-50 relative overflow-hidden border-l border-slate-200">
        <div class="absolute inset-0 bg-grid-pattern opacity-100"></div>

        <!-- Neural Canvas -->
        <canvas id="auth-canvas" class="absolute inset-0 w-full h-full"></canvas>

        <!-- Gradient Overlay -->
        <div
            class="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent z-10 pointer-events-none">
        </div>

        <!-- Content Overlay -->
        <div class="absolute bottom-16 left-16 right-16 z-20 pointer-events-none text-left">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-blue-200 bg-white/90 backdrop-blur text-xs font-mono text-blue-700 mb-6 shadow-sm">
                <span class="w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"></span>
                SYSTEM ACTIVE
            </div>
            <h3 class="text-4xl font-black text-slate-900 mb-4 leading-tight tracking-tight">Decipher Intelligence.</h3>
            <p class="text-slate-500 max-w-md text-base leading-relaxed font-medium">
                Real-time fraud detection engine.
            </p>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Handle Login Form Submit
        const handleLogin = (event) => {
            event.preventDefault(); // Ensure event is passed correctly

            const emailInput = document.querySelector('input[type="email"]');
            const passwordInput = document.querySelector('input[type="password"]');
            const btn = document.getElementById('submitBtn');

            const email = emailInput.value.trim();
            const password = passwordInput.value.trim();

            // Loading State
            btn.innerHTML = `<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i> AUTHENTICATING...`;
            btn.classList.add('opacity-80', 'cursor-not-allowed');
            // Re-render icons if needed, though usually automatic
            if (window.lucide) window.lucide.createIcons();

            // --- Access Control Logic (Revised) ---
            let userRole = "Administrator";
            let userName = "Admin";
            let hasPlan = true;

            // 1. Gmail users are automatically Admins
            if (email.endsWith('@gmail.com')) {
                userRole = "Administrator";
                userName = email.split('@')[0].charAt(0).toUpperCase() + email.split('@')[0].slice(1);
                hasPlan = true;
            }
            // 2. Specific authorized testers
            else if (email === "tester@decipher.com" && password === "test_pass_123") {
                userRole = "QA Tester";
                userName = "Test User";
                hasPlan = true;
            } else if (email === "qa_lead@decipher.com" && password === "qa_secure_789") {
                userRole = "QA Lead";
                userName = "Lead Tester";
                hasPlan = true;
            } else if (email === "admin@decipher.com" && password === "password123") {
                userRole = "Administrator";
                userName = "Super Admin";
                hasPlan = true;
            }
            // 3. Guest Audit
            else if (email === "guest_audit@decipher.com" && password === "guest_view_456") {
                userRole = "Auditor";
                userName = "Guest Audit";
                hasPlan = false;
            }
            else {
                // Secret Admin Bypass for Local Dev
                if (email === 'admin' || email === 'root') {
                    userRole = "Administrator";
                    userName = "Local Admin";
                    hasPlan = true;
                } else {
                    btn.innerHTML = `<span>Log In</span> <i data-lucide="arrow-right" class="w-4 h-4"></i>`;
                    btn.classList.remove('opacity-80', 'cursor-not-allowed');
                    if (window.lucide) window.lucide.createIcons();
                    alert("Unauthorized access. Please login with a purchased account or tester credentials.");
                    return;
                }
            }

            const mockUser = {
                name: userName,
                email: email,
                role: userRole,
                hasPlan: hasPlan,
                avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(userName)}&background=2563eb&color=ffffff&rounded=true&bold=true`,
            };

            localStorage.setItem('decipher_user', JSON.stringify(mockUser));

            // Small delay for cinematic feel
            setTimeout(() => {
                window.location.replace((hasPlan || userRole === 'Administrator') ? 'console.html' : 'waitlist.html');
            }, 800);
        };

        // Neural Network Animation (Vanilla JS)
        (function () {
            const canvas = document.getElementById('auth-canvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            let width, height;
            let particles = [];

            function resize() {
                width = canvas.width = canvas.parentElement.offsetWidth;
                height = canvas.height = canvas.parentElement.offsetHeight;
            }

            window.addEventListener('resize', resize);
            resize();

            class Particle {
                constructor() {
                    this.x = Math.random() * width;
                    this.y = Math.random() * height;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = (Math.random() - 0.5) * 0.5;
                    this.size = Math.random() * 2 + 1;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;

                    if (this.x < 0 || this.x > width) this.vx *= -1;
                    if (this.y < 0 || this.y > height) this.vy *= -1;
                }

                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = '#93c5fd'; // blue-300
                    ctx.fill();
                }
            }

            // Initialize
            for (let i = 0; i < 50; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, width, height);

                // Draw connections
                ctx.lineWidth = 0.5;
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < 150) {
                            const opacity = 0.3 - distance / 500;
                            if (opacity > 0) {
                                ctx.strokeStyle = `rgba(37, 99, 235, ${opacity})`; // blue-600
                                ctx.beginPath();
                                ctx.moveTo(particles[i].x, particles[i].y);
                                ctx.lineTo(particles[j].x, particles[j].y);
                                ctx.stroke();
                            }
                        }
                    }
                }

                // Draw particles
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });

                requestAnimationFrame(animate);
            }

            animate();

            // Backup safeguard
            setTimeout(() => {
                const loader = document.getElementById('loading-screen');
                if (loader && !loader.classList.contains('hidden')) {
                    loader.classList.add('hidden');
                }
            }, 3000);
        })();
    </script>
</body>

</html>